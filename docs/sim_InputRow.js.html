<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: sim/InputRow.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: sim/InputRow.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** Create ions control table. *///
class InputRow {
  /**
  * Initialize an new ions control table.
  * @param {string} label - ex: [Na+]in, [K+]out
  * @param {float} value - Value of ion concentration/Number of ion to display
  * @param {boolean} enabled - Is current Ion enabled
  * @param {string} type - Ion type, 'Na', 'Cl', 'K'
  * @param {DOM} inputs - Current input DOM object
  */
  constructor(label, value, enabled, type, inputs) {
    this.m_label = label;
    this.m_value = value;
    this.m_enabled = enabled;
    this.m_type = type;
    this.m_inputs = inputs;

    this.dom = {
      title: null,
      input: null,
      table: {
        trow: null, // Row element
        td0: null,  // Contains the h4 label
        td1: null,  // Contains the text input
        td2: null,  // Contains the plus button
        td3: null   // Contains the minus button
      },
      buttons: {
        plus: null,
        minus: null
      }
    }
  }

    /**
    * Create an new ions control table.
    * @param {DOM} parent - The parent DOM table
    * @param {String} id - The id of control table, range from 0-2 (# of particle)
    * @param {string} particleType - Ion type, 'Na', 'Cl', 'K'
    * @param {string} particleLocation - 'inside' or 'outside'
    */
  create(parent, id, particleType, particleLocation) {
    var { title, input, table, buttons } = this.dom;

    table.trow = elementCreator("tr", '', parent);
    table.td0 = elementCreator("td", '', table.trow);
    table.td1 = elementCreator("td", '', table.trow);
    table.td2 = elementCreator("td", '', table.trow);
    table.td3 = elementCreator("td", '', table.trow);

    // Create the h4 label on the left
    this.dom.title = elementCreator("h4", '', table.td0, {
      content: this.m_label,
      className: 'qoptions'
    });

    // Create the text input for number of particles
    // this.dom.input = elementCreator("input", id, table.td1, {
    //   className: 'qoptions'
    // });

    this.dom.input = createInput("");
    this.dom.input.id(id);
    this.dom.input.class('qoptions');

    this.dom.input.value(this.m_value);
    this.dom.input.input(this.changeNumParticles.bind(this));
    this.dom.input.attribute("data-location", particleLocation);
    this.dom.input.attribute("data-ptype", particleType);
    this.dom.input.attribute("type", "text");
    this.dom.input.mouseClicked(this.highLightInput);
    this.dom.input.parent(table.td1);

    // Create the plus button and minus button
    var colorClass = particleType.toLowerCase() + "-bg";
    buttons.plus = elementCreator("button", id, table.td2, {
      content: "+",
      className: 'qoptions',
      mousePressed: this.changeNumParticles.bind(this)
    });
    buttons.plus.attribute("data-location", particleLocation);
    buttons.plus.attribute("data-ptype", particleType);
    buttons.plus.addClass(colorClass);

    buttons.minus = elementCreator("button", id, table.td3, {
      content: "-",
      className: 'qoptions',
      mousePressed: this.changeNumParticles.bind(this)
    });
    buttons.minus.attribute("data-location", particleLocation);
    buttons.minus.attribute("data-ptype", particleType);
    buttons.minus.addClass(colorClass);
  }

      /**
      * Change value of an ions control table.
      * @param {float} setter - The new value
      */
  value(setter) {
    if (typeof setter === 'undefined') {
      this.m_value = Number(this.m_value);
      return this.m_value;
    }
    else {
      this.m_value = setter;
      this.dom.input.value(setter);
    }
  }

  /**
  * Change value of an ions control table.
  * @param {boolean} setter - The new enable parameter
  */
  enable(setter) {
    if (setter == null) return this.m_enabled;
    else {
      this.m_enabled = setter;
      var enableColor = this.m_type.toLowerCase() + "-bg";
      var disableColor = this.m_type.toLowerCase() + "-disabled";

      if (setter) {
        this.dom.input.removeAttribute("disabled");

        this.dom.buttons.plus.removeAttribute("disabled");
        this.dom.buttons.plus.addClass(enableColor);
        this.dom.buttons.plus.removeClass(disableColor);

        this.dom.buttons.minus.removeAttribute("disabled");
        this.dom.buttons.minus.addClass(enableColor);
        this.dom.buttons.minus.removeClass(disableColor);
      } else {
        this.dom.input.attribute("disabled", '');

        this.dom.buttons.plus.attribute("disabled", '');
        this.dom.buttons.plus.addClass(disableColor);
        this.dom.buttons.plus.removeClass(enableColor);

        this.dom.buttons.minus.attribute("disabled", '');
        this.dom.buttons.minus.addClass(disableColor);
        this.dom.buttons.minus.removeClass(enableColor);
      }
    }
  }

    /**
    * Called by the plus/minus buttons, and also the text field input
    * @param {DOM} evt - the element that triggered the event (Input buttons)
    * @param {float} updatedAmount=evt.target.value - the value of triggered element
    */
  changeNumParticles(evt, updatedAmount=evt.target.value) {
    // Called by the plus/minus buttons, and also the text field input
    // input: the element that triggered the event (Input buttons);
    var eventID = evt.target.id;

    var particleType = evt.target.attributes['data-ptype'].value;
    var particleLocation = evt.target.attributes['data-location'].value;

    if (!updatedAmount) {
      var symbol = evt.target.innerText;
      var current = this.value();
      updatedAmount = (symbol == "+") ? current + 1 : current - 1;
    }

    // NOTE: Call the Simulator object less directly?
    // otherwise, renaming the global "mainSim" variable breaks this code
    mainSim.updateParticles(particleType, particleLocation, updatedAmount);

    this.value(updatedAmount);

    // Change the Preset text content to custom
    mainSim.m_dom.m_simCanvasPreset_dropbtn.elt.textContent = 'Custom'
  }

      /**
      * Called by the plus/minus buttons, and also the text field input
      * @param {DOM} evt - the element that triggered the event (Input buttons)
      */
  highLightInput(evt) {
    evt.target.setSelectionRange(0, evt.target.value.length)
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="EquationResult.html">EquationResult</a></li><li><a href="globals.html">globals</a></li><li><a href="GoldmanEq.html">GoldmanEq</a></li><li><a href="Help.html">Help</a></li><li><a href="InputRow.html">InputRow</a></li><li><a href="NernstEq.html">NernstEq</a></li><li><a href="Point.html">Point</a></li><li><a href="Preset.html">Preset</a></li><li><a href="Question.html">Question</a></li><li><a href="Rectangle.html">Rectangle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Mar 18 2019 12:07:16 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>

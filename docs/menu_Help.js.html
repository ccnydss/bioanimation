<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: menu/Help.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: menu/Help.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var helpDebug = false;
/** Create a help menu based on current simulator UI */
class Help {
  /**
  * Create a new help menu.
  * @param {Object} sim - Current simulator
  * @access public
  */
  constructor(sim) {

    this.m_sim = sim;

    /** @property {Dictionary} - A array of setting listing a specific ID and its corresponding help description.
    * Leave the description empty if that DOM element is just a container */
    this.m_list = {
      firstBox:"",
      leftbar:"The questions will be listed in this area.&lt;/br> Please read the questions carefully and make sure you have answer every questions",
      equationContainer:"",
      hidebar:"Click arrow to expanded/hide questions",
      equationdiv:"",
      NernstEqn:"Current mode governing equation",
      GoldmanEqn:"Goldman equation",
      simulatorSetting:"In the setting Menu, you can change the setting of temperature and ion permeability",
      leftWindow: "", //space for add the 'last' class
      dataPlot:"Voltage data plot",
      answer:"Current Voltage in membrane",
      equilibrateButton:"Click this to equilibrate the membrane",
      secondBox:"",
      sim:"This window will demonstrate the movement of particles with the membrane&lt;/br>. You can either hover the window or press 'space' to pause the window",
      simulatorInputContainer:"",
      simInput:"All the particle input",
      particleControl:"All the particle control"
    }

  }
  /**
  * Function to initialize the help page, detecting all the ID in the setting,
  * then clone them to the desired DOM element.
  * @access public
  */
  initialize() {
    var sim = document.querySelector("#root #stage");
    var helpPage = document.querySelector("#helpPage");

    //Need this line, can't append clone directly to the parent Element
    var temp = document.createDocumentFragment();
    //See https://developer.mozilla.org/en-US/docs/Web/API/Document/createDocumentFragment

    helpDebug &amp;&amp; console.log('Help Page initialize start')

    for (let i = 0; i &lt; sim.children.length; i++) { //1

      var layer1 = this.createLayer(sim,i)
      if (!layer1) continue;

      for (let j = 0; j &lt; sim.children[i].children.length; j++) { //2

        var layer2 = this.createLayer(sim.children[i],j)
        if (!layer2) continue;

        for (let k = 0; k &lt; sim.children[i].children[j].children.length; k++) { //3

          var layer3 = this.createLayer(sim.children[i].children[j],k)
          if (!layer3) continue;

          for (let l = 0; l &lt; sim.children[i].children[j].children[k].children.length; l++) { //4

            var layer4 = this.createLayer(sim.children[i].children[j].children[k],l)
            if (!layer4) continue;

            for (let m = 0; m &lt; sim.children[i].children[j].children[k].children[l].children.length; m++) { //4

              var layer5 = this.createLayer(sim.children[i].children[j].children[k].children[l],m)
              if (!layer5) continue;

              layer4.appendChild(layer5);
            }

            layer3.appendChild(layer4);
          }

          layer2.appendChild(layer3);
        }

        layer1.appendChild(layer2);
      }

      temp.appendChild(layer1);
    }
    helpPage.appendChild(temp);

    helpDebug &amp;&amp; console.log('Help Page initialize end')
  }
  /**
  * Function to clear the help page, removing all the element attaching to the help menu
  * @access public
  */
  clear() {
    var helpPage = document.querySelector("#helpPage");
    while (helpPage.firstChild) {
      helpPage.removeChild(helpPage.firstChild);
    }
  }

  /**
  * Function to make help menu responsive when resizing the window
  * @access public
  */
  resize() {

    var current = this;
    //Only dataPlot need to be resize...
    setTimeout(
      function() {
        var original = document.getElementById('dataPlot')
        var height = (parseFloat(getComputedStyle(original)['height']))

        if(document.getElementById('dataPlot-clone'))
        document.getElementById('dataPlot-clone').style.height = height + 'px'

        if(current.m_sim.m_dom.m_canvas_in_leftbar) { //Also resize canvas if it is in  leftbar
          var original = document.getElementById('sim')
          var height = (parseFloat(getComputedStyle(original)['height']))

          if(document.getElementById('sim-clone'))
          document.getElementById('sim-clone').style.height = height + 'px'

        }

      }
      ,150)
    }

    /**
    * Function to check if certain DOM element should be clone in the help menu
    * @access private
    * @param {DOM} parent - The target parent DOM element
    *
    * @param {Int} index - A child index within the parent DOM element
    *
    * @returns {DOM} - If the child index pass the verification, then return the DOM element, else return false
    */
    createLayer(parent,index) {
      // input 1: DOM element
      // input 2: int
      // return: DOM element

      var ui = parent.children[index]
      if(!Object.keys(this.m_list).includes(ui.id) || ui.classList.contains('hidden') || ui.style.display=='none')
      return;

      helpDebug &amp;&amp; console.log('Layer '+index+' found. ID is'+ui.id+' childlength is '+ui.children.length)
      var layer = this.cloneUI(ui)

      return layer
    }

    /**
    * Function to check if certain DOM element should be clone in the help menu
    * @access private
    * @param {DOM} original - The desired DOM element to be cloned in help menu
    */
    cloneUI(original) {
      //Input1: DOM element

      var clone = document.createElement("div");
      var dim = this.getDim(original)

      helpDebug &amp;&amp; console.log(dim)

      clone.id = original.id+"-clone";
      clone.classList = original.classList
      clone.classList.add('clone')
      clone.classList.add(original.id)

      var extra = ['NernstEqn',
      'GoldmanEqn',
      'answer',
      'simulatorSetting',
      'dataPlot']
      if(extra.includes(original.id)) {
        var height = (parseFloat(getComputedStyle(original)['height'])
      )

      if(original.id=='GoldmanEqn' || original.id=='NernstEqn' )
      height=height+10+10;

      if(original.id=='answer') {


        clone.style.paddingTop=height/2 + 5 + 'px'
        clone.style.paddingBottom=height/2 + 5 + 'px'
      } else {
        clone.style.height=height + 'px'
      }

    }

    if(getComputedStyle(original)['overflow']=='auto' || getComputedStyle(original)['overflow-y']=='auto') {

      //Initialize the scroll position
      original.scrollTop = clone.scrollTop;
      original.scrollLeft = clone.scrollLeft;

      clone.onscroll = function(e) {
        original.scrollTop = clone.scrollTop;
        original.scrollLeft = clone.scrollLeft;
      };
    }


    this.initContent(clone,original.id)

    return clone
  }
  /**
  * Function to initialize the clone element's string and css
  * @access private
  * @param {DOM} target - The clone element
  *
  * @param {String} content - Optional text, can be void
  */
  initContent(target,content) {
    //Input1: DOM element
    //Input2: Optional text


    target.innerHTML = this.m_list[content]
    if(this.m_list[content]!="") {
      // target.classList.add('hovering')
      target.style.display = "flex";
      target.style.justifyContent = "center";
      target.style.alignItems = "center";
      target.style.textAlign = "center";
      target.classList.add('last')
    }
  }

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Cl.html">Cl</a></li><li><a href="EquationResult.html">EquationResult</a></li><li><a href="globals.html">globals</a></li><li><a href="GoldmanEq.html">GoldmanEq</a></li><li><a href="Help.html">Help</a></li><li><a href="InputRow.html">InputRow</a></li><li><a href="K.html">K</a></li><li><a href="Na.html">Na</a></li><li><a href="NernstEq.html">NernstEq</a></li><li><a href="Particle.html">Particle</a></li><li><a href="Point.html">Point</a></li><li><a href="Preset.html">Preset</a></li><li><a href="Question.html">Question</a></li><li><a href="Rectangle.html">Rectangle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Mar 20 2019 11:49:43 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
